package com.eviware.loadui.ui.fx.views.canvas.terminal;

import javafx.application.Platform;
import javafx.beans.InvalidationListener;
import javafx.beans.Observable;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.effect.GaussianBlur;
import javafx.scene.layout.Pane;
import javafx.scene.shape.SVGPathBuilder;

public class PascalOval extends Group
{
	private static final GaussianBlur GAUSSIAN_BLUR = new GaussianBlur( 2 );

	public PascalOval()
	{
		setManaged( false );
		getChildren()
				.add( SVGPathBuilder
						.create()
						.content(
								"m 12.4322522,169.997638 c 0.0,-2.467772 4.529995,-8.162078 10.3616498,-13.024896 12.439896,-10.373106 13.388178,-10.804288 13.388178,-6.087818 0.0,2.33207 0.309084,2.866358 1.658188,2.866358 2.54341,0.0 3.629112,3.700878 2.057382,7.013078 -0.692282,1.458894 -1.258692,3.15971 -1.258692,3.779662 0.0,0.619952 -0.574148,1.946912 -1.27589,2.948746 -0.701734,1.001914 -1.048514,2.189488 -0.770624,2.639096 0.327706,0.530276 -3.828644,0.817568 -11.82747,0.817568 -8.8229538,0.0 -12.3327218,-0.27083 -12.3327218,-0.951794 z m 26.0414818,-11.67042 c -0.13434,-0.940246 -0.792008,-1.709578 -1.461484,-1.709578 -1.353682,0.0 -2.051484,2.274496 -1.299222,4.23484 0.717566,1.86993 3.079944,-0.290976 2.760706,-2.525262 z m 14.087536,12.261052 c 0.0,-0.1986 0.368532,-0.588914 0.81896,-0.867278 0.450426,-0.278364 0.818958,-0.11588 0.818958,0.361162 0.0,0.476962 -0.368532,0.867278 -0.818958,0.867278 -0.450428,0.0 -0.81896,-0.16256 -0.81896,-0.361162 z m 16.027094,-1.457584 c 0.317486,-1.000276 2.204214,-5.699056 4.192736,-10.441732 1.988516,-4.742678 4.585846,-11.179534 5.77184,-14.304274 1.185984,-3.124658 4.09388,-8.767372 6.461976,-12.539336 4.072956,-6.487436 5.223298,-9.068124 6.38898,-14.333052 0.651164,-2.941046 1.581764,-2.842142 3.85268,0.40948 4.109424,5.884068 8.63298,10.690484 11.380622,12.092216 6.966528,3.554038 19.794406,7.358104 24.828182,7.36269 2.77158,0.0 6.421232,0.388352 8.110336,0.857452 l 3.071098,0.852864 0.0,15.931218 0.0,15.93122 -37.317846,0.0 -37.317848,0.0 0.577244,-1.818746 z M 45.600114,161.940878 c -0.27838,-0.450428 -0.13762,-0.81896 0.31281,-0.81896 0.450428,0.0 1.046728,0.368532 1.325108,0.81896 0.278382,0.450428 0.13762,0.818958 -0.312818,0.818958 -0.450426,0.0 -1.04672,-0.36853 -1.3251,-0.818958 z m 6.142196,-4.81925 c 0.0,-0.73518 2.460876,-2.001454 2.94633,-1.515976 0.14026,0.14028 -0.465284,0.704878 -1.345658,1.254646 -0.880372,0.54985 -1.600672,0.667452 -1.600672,0.26133 z m -3.531762,-3.89923 c -0.309674,-0.30973 -0.563036,-1.580918 -0.563036,-2.825 0.0,-1.244 -0.576358,-2.838186 -1.280786,-3.542656 -1.467134,-1.467084 -1.31204,-6.311228 0.218138,-6.81325 1.015608,-0.333154 3.46641,6.762476 3.768098,10.909604 0.15694,2.157386 -1.014438,3.399256 -2.142414,2.271302 z m 1.582066,-23.249112 c -3.289138,-0.984882 -6.17344,-3.867996 -7.938084,-7.934932 -1.642154,-3.784634 -11.483508,-13.65022 -15.944578,-15.983838 -3.274068,-1.71269 -4.227386,-3.034842 -2.81681,-3.906624 0.57377,-0.35461 0.830638,-1.198704 0.57083,-1.87577 -0.832382,-2.169136 0.327454,-2.170758 3.804264,-0.005 6.544068,4.07538 11.989682,9.257068 11.989682,11.40818 0.0,3.871344 6.116522,7.68654 12.284392,7.662422 3.524082,-0.0138 14.836074,-3.183704 17.718672,-4.965244 3.9797,-2.45959 3.385946,-0.557786 -0.930002,2.97881 -3.880164,3.179502 -4.427206,4.770732 -2.531404,7.363386 1.620032,2.215524 0.322776,4.208044 -3.415692,5.24632 -3.605486,1.00126 -9.469104,1.00683 -12.79127,0.0122 z M 85.244772,104.113976 c -1.21206,-1.460434 -1.244982,-3.716364 -0.225786,-15.470006 0.556524,-6.418046 0.97588,-8.189596 1.938584,-8.189596 0.79887,0.0 1.321358,0.973348 1.494158,2.783498 0.14614,1.530922 0.7815,3.57068 1.411894,4.532792 1.844134,2.814502 1.688448,9.380724 -0.315512,13.306872 -2.130294,4.173656 -2.905546,4.72068 -4.303338,3.03644 z M 37.00104,98.199934 c 0.0,-0.473122 0.460664,-1.149942 1.023698,-1.504052 1.221676,-0.76834 10.441734,-1.754268 10.441734,-1.11657 0.0,0.605514 -5.538738,2.5255 -8.803814,3.051812 -1.585866,0.25563 -2.661618,0.08132 -2.661618,-0.43119 z m 21.702426,-5.051686 c -0.292098,-0.472622 0.466716,-0.813654 1.794324,-0.806422 1.78624,0.0098 2.025876,0.19 1.072034,0.806422 -1.573458,1.016844 -2.237914,1.016844 -2.866358,0.0 z M 17.0964174,87.620272 C 10.5586956,77.337594 9.974092,76.169348 9.4489318,72.337894 9.1208402,69.9442 8.0418316,67.402158 6.5651658,65.54402 5.2674312,63.911032 4.0361034,61.806912 3.8288838,60.868188 1.56147156,50.596682 1.05287316,47.394994 0.5650583,40.32196 L 0.0,32.128974 2.9402882,26.487972 c 2.0712452,-3.973722 2.940288,-6.7036084 2.940288,-9.2361998 0.0,-4.3632358 1.7520296,-8.8404628 3.9117592,-9.9963178 C 10.668785,6.7863954 13.4242152,6.204664 15.9155104,5.962727 19.465962,5.6179204 21.016022,4.9895574 23.085968,3.0559366 c 3.157376,-2.94943336 5.768038,-3.7422189 8.141054,-2.47221748 1.32095,0.7069504 3.22901,0.68747554 7.79385,-0.079521 6.89079,-1.15785312 12.011786,-0.26423728 24.61078,4.29461544 6.138266,2.2210836 7.424778,3.0705084 11.906132,7.8610938 6.028688,6.444687 11.850762,15.2924706 12.903994,19.6101486 0.421486,1.727866 1.43118,6.69931 2.243752,11.04765 1.395498,7.467714 1.399864,8.024418 0.07878,10.040598 -1.020554,1.557562 -1.180596,2.541862 -0.592076,3.641512 0.489918,0.91544 0.559726,3.816638 0.17784,7.390798 -0.473932,4.435518 -1.076268,6.33036 -2.447052,7.697966 -2.31844,2.313068 -3.136106,1.21246 -3.818562,-5.139954 -0.26653,-2.481234 -1.272,-7.36745 -2.234344,-10.858266 -1.989842,-7.218038 -3.829986,-8.371476 -5.879342,-3.685316 -0.932574,2.132472 -1.177262,2.315222 -1.23079,0.919232 -0.14328,-3.736928 -4.98056,-4.754108 -4.98056,-1.047342 0.0,1.51369 -0.34081,1.697834 -2.385448,1.288902 -1.575138,-0.31502 -2.721968,-0.07158 -3.37612,0.71659 -1.201856,1.44815 -3.386298,1.545746 -4.721112,0.210932 -1.28413,-1.28413 -1.260216,-3.108648 0.04094,-3.124586 0.563034,-0.0066 1.576496,-0.375434 2.252138,-0.818958 1.088046,-0.714256 1.088824,-0.896122 0.0066,-1.59128 -2.126732,-1.366582 0.489894,-2.90046 4.948152,-2.90046 2.229618,0.0 4.05385,-0.327232 4.05385,-0.727178 0.0,-0.688254 -12.267324,0.02768 -12.998222,0.758544 -0.1862,0.1862 0.08706,0.851342 0.607226,1.4781 1.411846,1.701166 -0.311982,2.69477 -5.833776,3.362532 -5.406378,0.653808 -7.100444,2.38834 -5.439808,5.569736 0.80987,1.551518 0.626504,1.48682 -1.160514,-0.40948 -3.801282,-4.033728 -5.584346,-2.852444 -7.107962,4.709018 -0.54456,2.702566 -1.760158,5.749152 -2.70133,6.77019 -2.2016,2.388422 -7.63434,4.111562 -8.917478,2.828416 -0.671898,-0.6719 0.279576,-1.441 3.59859,-2.908822 5.170992,-2.286862 7.194894,-4.680672 7.194894,-8.50993 0.0,-2.179022 -0.32298,-2.684132 -1.7163,-2.684132 -2.395318,0.0 -6.007192,2.28389 -6.93074,4.382498 -0.728964,1.656452 -2.348998,2.047816 -5.226632,1.262648 -0.678828,-0.18522 -1.323292,0.373592 -1.517728,1.31601 -0.485758,2.354468 -2.5876264,4.467482 -3.9310966,3.951946 -0.6949608,-0.266678 -1.1514898,0.07994 -1.1514898,0.87419 0.0,0.81525 0.7011932,1.320654 1.8426588,1.328132 1.8331916,0.012 1.8324376,0.0172 -0.146814,1.023698 -1.6298768,0.82878 -2.0305528,1.724664 -2.2167842,4.956564 -0.183954,3.192394 0.312728,4.962896 2.6036852,9.281312 5.0276254,9.476942 3.2484934,11.725854 -2.3323392,2.948206 z M 25.177804,55.476108 c 1.044484,0.0 2.12682,-0.368532 2.405202,-0.818958 0.27838,-0.450428 -0.16054,-0.813366 -0.975374,-0.806528 -2.638744,0.02212 -8.7582306,2.1627 -9.098156,3.182476 -0.2326256,0.697892 0.5729932,0.614154 2.719364,-0.282656 1.67745,-0.700882 3.904486,-1.274334 4.948964,-1.274334 z m 16.459512,-5.032424 c 2.607756,-0.656642 4.741194,-1.998916 7.119068,-4.479028 5.924172,-6.178894 19.176174,-9.067822 24.04122,-5.24098 1.975886,1.554238 3.51349,1.558544 3.51349,0.0098 0.0,-0.851062 -12.219906,-9.011346 -13.474912,-8.998366 -0.471288,0.005 -2.665976,0.55768 -4.877094,1.22844 C 49.00855,35.67882 38.070796,33.94007 29.850614,28.49525 25.524894,25.630014 20.011298,25.083188 17.7948914,27.299586 13.978008,31.116478 12.85893,38.109 14.869822,45.57687 c 1.01189,3.757878 2.3399312,4.270562 9.363376,3.6147 3.47872,-0.32485 6.106932,-0.07558 8.6746,0.82275 4.528092,1.584188 4.206126,1.568356 8.729518,0.429356 z m 9.938148,-20.48171 c 0.1794,-0.946562 -0.682242,-1.652734 -2.859292,-2.343412 -1.713836,-0.543722 -3.880082,-1.4661 -4.813892,-2.049732 -2.918518,-1.824084 -8.53916,-1.87604 -8.53916,-0.07894 0.0,4.0857 15.476492,8.354796 16.212344,4.472076 z m -12.117546,50.950214 c 0.0,-1.2407 1.524714,-1.832562 3.283168,-1.274448 2.4642,0.782106 1.953914,2.045072 -0.82629,2.045072 -1.351282,0.0 -2.456878,-0.34678 -2.456878,-0.770624 z m 10.646474,-2.035688 c 0.0,-0.759692 0.700202,-1.288486 1.706162,-1.288486 1.995846,0.0 1.71373,1.91372 -0.34085,2.312186 -0.808118,0.15674 -1.365312,-0.261052 -1.365312,-1.0237 z" )
						.effect( GAUSSIAN_BLUR ).build() );
		parentProperty().addListener( new InvalidationListener()
		{
			@Override
			public void invalidated( Observable observable )
			{
				Thread t = new Thread( new Runnable()
				{
					@Override
					public void run()
					{
						try
						{
							Thread.sleep( 1000 );
							Platform.runLater( new Runnable()
							{
								@Override
								public void run()
								{
									Parent parent = getParent();
									if( parent instanceof Pane )
									{
										Node cl = parent.lookup( ".canvas-layer" );
										translateXProperty().bind( cl.layoutXProperty().add( 400 ) );
										translateYProperty().bind( cl.layoutYProperty().subtract( 20000 ) );
										( ( Pane )parent ).getChildren().get( 1 ).toBack();
									}
								}
							} );
						}
						catch( InterruptedException e )
						{
							// TODO Auto-generated catch block
						}
					}
				} );
				t.setDaemon( true );
				t.start();
			}
		} );
	}
}
